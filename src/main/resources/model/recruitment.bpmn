<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC" xmlns:omgdi="http://www.omg.org/spec/DD/20100524/DI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:modeler="http://camunda.org/schema/modeler/1.0" xmlns:zeebe="http://camunda.org/schema/zeebe/1.0" xmlns:signavio="http://www.signavio.com" id="sid-606a2a40-098b-4e8c-b50d-17ad8f99e488" targetNamespace="http://www.signavio.com" expressionLanguage="http://www.w3.org/TR/XPath" exporter="Camunda Web Modeler" exporterVersion="ceb2fc3" modeler:executionPlatform="Camunda Cloud" modeler:executionPlatformVersion="8.3.0" xsi:schemaLocation="http://www.omg.org/spec/BPMN/20100524/MODEL http://www.omg.org/spec/BPMN/2.0/20100501/BPMN20.xsd">
  <process id="cinema-reservation-process" isExecutable="true">
    <startEvent id="Event_1onji1m">
      <outgoing>Flow_0mj7l10</outgoing>
    </startEvent>
    <serviceTask id="Activity_10k900r" name="Sprawdz wolne miejsce">
      <extensionElements>
        <zeebe:taskDefinition type="checkIfSeatIsFree" />
        <zeebe:ioMapping>
          <zeebe:output source="=freeSeat" target="freeSeat" />
        </zeebe:ioMapping>
      </extensionElements>
      <incoming>Flow_0mj7l10</incoming>
      <outgoing>Flow_0ab3r31</outgoing>
    </serviceTask>
    <sequenceFlow id="Flow_0mj7l10" sourceRef="Event_1onji1m" targetRef="Activity_10k900r" />
    <exclusiveGateway id="Gateway_0c9evtq">
      <incoming>Flow_0ab3r31</incoming>
      <outgoing>Flow_1i1q8i3</outgoing>
      <outgoing>Flow_0lqwide</outgoing>
    </exclusiveGateway>
    <sequenceFlow id="Flow_0ab3r31" sourceRef="Activity_10k900r" targetRef="Gateway_0c9evtq" />
    <serviceTask id="Activity_1w7dhrm" name="Rezerwacja wybranego miejsa">
      <extensionElements>
        <zeebe:taskDefinition type="addNewReservation" />
      </extensionElements>
      <incoming>Flow_1i1q8i3</incoming>
      <outgoing>Flow_0blp91a</outgoing>
    </serviceTask>
    <sequenceFlow id="Flow_1i1q8i3" name="True" sourceRef="Gateway_0c9evtq" targetRef="Activity_1w7dhrm">
      <conditionExpression xsi:type="tFormalExpression">=freeSeat = true</conditionExpression>
    </sequenceFlow>
    <userTask id="Activity_0k2cbjc" name="Wykonaj płatność">
      <incoming>Flow_0blp91a</incoming>
      <outgoing>Flow_0rffrnk</outgoing>
    </userTask>
    <sequenceFlow id="Flow_0blp91a" sourceRef="Activity_1w7dhrm" targetRef="Activity_0k2cbjc" />
    <exclusiveGateway id="Gateway_164q93e">
      <incoming>Flow_0rffrnk</incoming>
      <outgoing>Flow_0d3x4xw</outgoing>
      <outgoing>Flow_08hq6km</outgoing>
    </exclusiveGateway>
    <sequenceFlow id="Flow_0rffrnk" sourceRef="Activity_0k2cbjc" targetRef="Gateway_164q93e" />
    <serviceTask id="Activity_1ljj258" name="Sprawdź czy płatność przebiegła pomyślnie">
      <extensionElements>
        <zeebe:taskDefinition type="checkPaymentStatus" />
      </extensionElements>
      <incoming>Flow_0d3x4xw</incoming>
      <outgoing>Flow_00223xq</outgoing>
    </serviceTask>
    <sequenceFlow id="Flow_0d3x4xw" name="Wykonaj" sourceRef="Gateway_164q93e" targetRef="Activity_1ljj258">
      <conditionExpression xsi:type="tFormalExpression">=paymentMade = true</conditionExpression>
    </sequenceFlow>
    <exclusiveGateway id="Gateway_18ropn5">
      <incoming>Flow_00223xq</incoming>
      <outgoing>Flow_0gkha5n</outgoing>
      <outgoing>Flow_16q7oq4</outgoing>
    </exclusiveGateway>
    <sequenceFlow id="Flow_00223xq" sourceRef="Activity_1ljj258" targetRef="Gateway_18ropn5" />
    <serviceTask id="Activity_142kvcb" name="Zarezerwowanie miejsca">
      <extensionElements>
        <zeebe:taskDefinition type="reservationCompleted" />
      </extensionElements>
      <incoming>Flow_0gkha5n</incoming>
      <outgoing>Flow_0q2g456</outgoing>
    </serviceTask>
    <sequenceFlow id="Flow_0gkha5n" name="True" sourceRef="Gateway_18ropn5" targetRef="Activity_142kvcb">
      <conditionExpression xsi:type="tFormalExpression">=paymentStatus = true</conditionExpression>
    </sequenceFlow>
    <serviceTask id="Activity_1ecrbew" name="Powiadom użtykownika o powodzeniu">
      <extensionElements>
        <zeebe:taskDefinition type="sendEmailApproved" />
      </extensionElements>
      <incoming>Flow_0q2g456</incoming>
      <outgoing>Flow_02pwgvi</outgoing>
    </serviceTask>
    <sequenceFlow id="Flow_0q2g456" sourceRef="Activity_142kvcb" targetRef="Activity_1ecrbew" />
    <endEvent id="Event_0opmjx5">
      <incoming>Flow_02pwgvi</incoming>
    </endEvent>
    <sequenceFlow id="Flow_02pwgvi" sourceRef="Activity_1ecrbew" targetRef="Event_0opmjx5" />
    <sequenceFlow id="Flow_0lqwide" name="False" sourceRef="Gateway_0c9evtq" targetRef="Activity_003p0cw">
      <conditionExpression xsi:type="tFormalExpression">=freeSeat = false</conditionExpression>
    </sequenceFlow>
    <serviceTask id="Activity_003p0cw" name="Powiadom użytkownika o niepowodzeniu">
      <extensionElements>
        <zeebe:taskDefinition type="reservationCancelled" />
      </extensionElements>
      <incoming>Flow_0lqwide</incoming>
      <incoming>Flow_1f2tyoo</incoming>
      <outgoing>Flow_0fci5j3</outgoing>
    </serviceTask>
    <endEvent id="Event_1o6f9nj">
      <incoming>Flow_0fci5j3</incoming>
    </endEvent>
    <sequenceFlow id="Flow_0fci5j3" sourceRef="Activity_003p0cw" targetRef="Event_1o6f9nj" />
    <serviceTask id="Activity_026ekzg" name="Odblokuj możliwosć rezerwacji wybranego miejsca">
      <extensionElements>
        <zeebe:taskDefinition type="reservationCancelled" />
      </extensionElements>
      <incoming>Flow_08hq6km</incoming>
      <incoming>Flow_16q7oq4</incoming>
      <outgoing>Flow_1f2tyoo</outgoing>
    </serviceTask>
    <sequenceFlow id="Flow_08hq6km" name="Nie wykonuj" sourceRef="Gateway_164q93e" targetRef="Activity_026ekzg">
      <conditionExpression xsi:type="tFormalExpression">=paymentMade = false</conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="Flow_1f2tyoo" sourceRef="Activity_026ekzg" targetRef="Activity_003p0cw" />
    <sequenceFlow id="Flow_16q7oq4" name="False" sourceRef="Gateway_18ropn5" targetRef="Activity_026ekzg">
      <conditionExpression xsi:type="tFormalExpression">=paymentStatus = false</conditionExpression>
    </sequenceFlow>
  </process>
  <bpmndi:BPMNDiagram id="sid-0666667a-5f38-4caf-af60-832abbc5d8de">
    <bpmndi:BPMNPlane id="sid-0a09a5ac-df06-47ac-8feb-856abfa8513d" bpmnElement="cinema-reservation-process">
      <bpmndi:BPMNShape id="Event_1onji1m_di" bpmnElement="Event_1onji1m">
        <omgdc:Bounds x="152" y="572" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_10k900r_di" bpmnElement="Activity_10k900r">
        <omgdc:Bounds x="340" y="550" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_0c9evtq_di" bpmnElement="Gateway_0c9evtq" isMarkerVisible="true">
        <omgdc:Bounds x="595" y="565" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1w7dhrm_di" bpmnElement="Activity_1w7dhrm">
        <omgdc:Bounds x="800" y="400" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0k2cbjc_di" bpmnElement="Activity_0k2cbjc">
        <omgdc:Bounds x="1060" y="400" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_164q93e_di" bpmnElement="Gateway_164q93e" isMarkerVisible="true">
        <omgdc:Bounds x="1325" y="415" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1ljj258_di" bpmnElement="Activity_1ljj258">
        <omgdc:Bounds x="1540" y="240" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_18ropn5_di" bpmnElement="Gateway_18ropn5" isMarkerVisible="true">
        <omgdc:Bounds x="1805" y="255" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_142kvcb_di" bpmnElement="Activity_142kvcb">
        <omgdc:Bounds x="1970" y="80" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1ecrbew_di" bpmnElement="Activity_1ecrbew">
        <omgdc:Bounds x="2190" y="80" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0opmjx5_di" bpmnElement="Event_0opmjx5">
        <omgdc:Bounds x="2442" y="102" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_003p0cw_di" bpmnElement="Activity_003p0cw">
        <omgdc:Bounds x="830" y="690" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1o6f9nj_di" bpmnElement="Event_1o6f9nj">
        <omgdc:Bounds x="862" y="832" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_026ekzg_di" bpmnElement="Activity_026ekzg">
        <omgdc:Bounds x="1540" y="540" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_0mj7l10_di" bpmnElement="Flow_0mj7l10">
        <omgdi:waypoint x="188" y="590" />
        <omgdi:waypoint x="340" y="590" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0ab3r31_di" bpmnElement="Flow_0ab3r31">
        <omgdi:waypoint x="440" y="590" />
        <omgdi:waypoint x="595" y="590" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1i1q8i3_di" bpmnElement="Flow_1i1q8i3">
        <omgdi:waypoint x="620" y="565" />
        <omgdi:waypoint x="620" y="440" />
        <omgdi:waypoint x="800" y="440" />
        <bpmndi:BPMNLabel>
          <omgdc:Bounds x="624" y="513" width="22" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0blp91a_di" bpmnElement="Flow_0blp91a">
        <omgdi:waypoint x="900" y="440" />
        <omgdi:waypoint x="1060" y="440" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0rffrnk_di" bpmnElement="Flow_0rffrnk">
        <omgdi:waypoint x="1160" y="440" />
        <omgdi:waypoint x="1325" y="440" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0d3x4xw_di" bpmnElement="Flow_0d3x4xw">
        <omgdi:waypoint x="1350" y="415" />
        <omgdi:waypoint x="1350" y="280" />
        <omgdi:waypoint x="1540" y="280" />
        <bpmndi:BPMNLabel>
          <omgdc:Bounds x="1369" y="345" width="42" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_00223xq_di" bpmnElement="Flow_00223xq">
        <omgdi:waypoint x="1640" y="280" />
        <omgdi:waypoint x="1805" y="280" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0gkha5n_di" bpmnElement="Flow_0gkha5n">
        <omgdi:waypoint x="1830" y="255" />
        <omgdi:waypoint x="1830" y="120" />
        <omgdi:waypoint x="1970" y="120" />
        <bpmndi:BPMNLabel>
          <omgdc:Bounds x="1834" y="185" width="22" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0q2g456_di" bpmnElement="Flow_0q2g456">
        <omgdi:waypoint x="2070" y="120" />
        <omgdi:waypoint x="2190" y="120" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_02pwgvi_di" bpmnElement="Flow_02pwgvi">
        <omgdi:waypoint x="2290" y="120" />
        <omgdi:waypoint x="2442" y="120" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0lqwide_di" bpmnElement="Flow_0lqwide">
        <omgdi:waypoint x="620" y="615" />
        <omgdi:waypoint x="620" y="730" />
        <omgdi:waypoint x="830" y="730" />
        <bpmndi:BPMNLabel>
          <omgdc:Bounds x="621" y="653" width="27" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0fci5j3_di" bpmnElement="Flow_0fci5j3">
        <omgdi:waypoint x="880" y="770" />
        <omgdi:waypoint x="880" y="832" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_08hq6km_di" bpmnElement="Flow_08hq6km">
        <omgdi:waypoint x="1350" y="465" />
        <omgdi:waypoint x="1350" y="580" />
        <omgdi:waypoint x="1540" y="580" />
        <bpmndi:BPMNLabel>
          <omgdc:Bounds x="1360" y="520" width="60" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1f2tyoo_di" bpmnElement="Flow_1f2tyoo">
        <omgdi:waypoint x="1590" y="620" />
        <omgdi:waypoint x="1590" y="730" />
        <omgdi:waypoint x="930" y="730" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_16q7oq4_di" bpmnElement="Flow_16q7oq4">
        <omgdi:waypoint x="1830" y="305" />
        <omgdi:waypoint x="1830" y="580" />
        <omgdi:waypoint x="1640" y="580" />
        <bpmndi:BPMNLabel>
          <omgdc:Bounds x="1832" y="440" width="27" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
    <bpmndi:BPMNLabelStyle id="sid-46bb7f55-96f0-4140-8a32-8c3455a0e908">
      <omgdc:Font name="Arial" size="11" isBold="false" isItalic="false" isUnderline="false" isStrikeThrough="false" />
    </bpmndi:BPMNLabelStyle>
    <bpmndi:BPMNLabelStyle id="sid-68d1578e-bef5-43ec-9cbb-10085ec0b9be">
      <omgdc:Font name="Arial" size="12" isBold="false" isItalic="false" isUnderline="false" isStrikeThrough="false" />
    </bpmndi:BPMNLabelStyle>
  </bpmndi:BPMNDiagram>
</definitions>
